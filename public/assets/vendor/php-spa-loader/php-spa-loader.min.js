var phpSpaLoader=function(b,d){var a={routes:[],mode:null,root:"/",config:function(e){this.mode=e&&e.mode&&e.mode=="history"&&!!(history.pushState)?"history":"hash";this.root=e&&e.root?"/"+this.clearSlashes(e.root)+"/":"/";return this},getFragment:function(){var f="";if(this.mode==="history"){f=this.clearSlashes(decodeURI(location.pathname+location.search));f=f.replace(/\?(.*)$/,"");f=this.root!="/"?f.replace(this.root,""):f}else{var e=window.location.href.match(/#(.*)$/);f=e?e[1]:""}return this.clearSlashes(f)},clearSlashes:function(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(f,e){if(typeof f=="function"){e=f;f=""}this.routes.push({re:f,handler:e});return this},remove:function(g){for(var e=0,f;e<this.routes.length,f=this.routes[e];e++){if(f.handler===g||f.re.toString()===g.toString()){this.routes.splice(e,1);return this}}return this},flush:function(){this.routes=[];this.mode=null;this.root="/";return this},check:function(j){var g=j||this.getFragment();for(var h=0;h<this.routes.length;h++){var e=g.match(this.routes[h].re);if(e){e.shift();this.routes[h].handler.apply({},e);return this}}return this},listen:function(){var e=this;var g=e.getFragment();var f=function(){if(g!==e.getFragment()){g=e.getFragment();e.check(g)}};clearInterval(this.interval);this.interval=setInterval(f,50);return this},navigate:function(e){e=e?e:"";if(this.mode==="history"){history.pushState(null,null,this.root+this.clearSlashes(e))}else{window.location.href.match(/#(.*)$/);window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+e}return this}};var c="querySelector" in document&&"localStorage" in window&&"addEventListener" in window;if(c){window.addEventListener("load",function(g){function f(e){var i=new XMLHttpRequest();i.open("GET",e,true);i.setRequestHeader("X-PHP-SPA","on");i.onreadystatechange=function(){if(i.readyState!=4||i.status!=200){return}document.querySelector(d).innerHTML=i.responseText;h()};i.send()}function h(){a.flush().config({root:"",mode:"history"});[].forEach.call(document.querySelectorAll(d+' a[data-type="spa"]'),function(i){var e=i.href.replace(b,"");var j=a.clearSlashes(e);if(j!==""){a.add(new RegExp(j),function(){f(i.href)})}i.addEventListener("click",function(m){m.preventDefault();var k=i.href.replace(b,"");var l=a.clearSlashes(k);a.navigate(l)})});a.add(/^$/,function(){f("/")});a.listen()}h()})}};